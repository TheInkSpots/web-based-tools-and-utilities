<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevCrypto Tools</title>
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bcryptjs@2.4.3/dist/bcrypt.min.js"></script>

    <style>
        /* --- 1. MISSING VARIABLE DEFINITIONS (Required for provided CSS to work) --- */
        :root {
            /* Dark Mode Defaults */
            --bg-dark: #121212;
            --bg-panel: #1e1e1e;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --border: #333333;
            
            /* Brand Colors from typical JWT/Dev stylings */
            --jwt-pink: #fb015b;
            --jwt-purple: #d63aff;
            --jwt-blue: #00b9f1;
            --success: #27ae60;
            --alert-blue-bg: rgba(0, 185, 241, 0.1);
            --alert-blue-border: rgba(0, 185, 241, 0.3);
            --alert-yellow-bg: rgba(241, 196, 15, 0.1);
            --alert-yellow-text: #f1c40f;
        }

        /* --- 2. PROVIDED CSS (Minified/Merged) --- */
        body,header{background-color:var(--bg-dark)}.close-alert,.icon-btn,.main-tab,.nav-item{cursor:pointer}[data-theme=light]{--bg-dark:#f5f7f9;--bg-panel:#ffffff;--text-main:#333333;--text-muted:#666;--border:#ddd}*{box-sizing:border-box;outline:0}body{font-family:Roboto,sans-serif;color:var(--text-main);margin:0;padding-bottom:50px;transition:background .3s}header{display:flex;justify-content:space-between;align-items:center;padding:15px 30px}.logo,.nav-links{align-items:center;display:flex}.logo{gap:10px;font-weight:700;font-size:1.1rem}.logo-icon{width:32px;height:32px;background: var(--jwt-pink); border-radius:50%; display:grid; place-items:center; color:white; font-size:18px;}.nav-links{gap:20px;font-size:.9rem}.nav-item{color:var(--text-muted);text-decoration:none;font-weight:500}.nav-item.active{color:var(--jwt-pink);border-bottom:2px solid var(--jwt-pink);padding-bottom:2px}.main-tab.active,.nav-item:hover,.tk-dot{color:var(--text-main)}.tools-menu{display:flex;align-items:center;gap:15px}.icon-btn{opacity:.7;width:24px;height:24px; font-size:20px; display:flex; align-items:center; justify-content:center;}.icon-btn:hover{opacity:1}.hero-title{text-align:center;margin:30px 0}.hero-title h1{font-size:2rem;font-weight:300;margin:0}.alerts-container{max-width:1100px;margin:0 auto 30px;display:flex;gap:20px;padding:0 15px}.alert-box{flex:1;padding:20px;border-radius:4px;font-size:.85rem;line-height:1.5}#tokenEditor,.sig-box{line-height:1.6;font-family:'Fira Code',monospace}.alert-info{background-color:var(--alert-blue-bg);border:1px solid var(--alert-blue-border);color:var(--jwt-blue)}.alert-info a{color:var(--jwt-blue);text-decoration:none}.alert-warning{background-color:var(--alert-yellow-bg);color:var(--alert-yellow-text);position:relative}#tokenEditor,.focus-check,.main-tab{color:var(--text-muted)}.close-alert{position:absolute;top:10px;right:10px}.debugger-container{max-width:1200px;margin:0 auto;padding:0 15px}.tabs-header{display:flex;justify-content:center;gap:30px;margin-bottom:20px; border-bottom: 1px solid var(--border); padding-bottom:15px;}.main-tab{font-size:1.2rem;font-weight:400; padding: 0 10px;}.main-tab.active{color:var(--jwt-pink); font-weight:700; border-bottom: 2px solid var(--jwt-pink);}.workspace{display:none; gap:30px;min-height:500px}.workspace.active {display:flex;}.col-left{flex:1;display:flex;flex-direction:column}.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-size:.8rem;text-transform:uppercase;font-weight:700;letter-spacing:.5px}.focus-check{text-transform:none;font-weight:400}.encoded-wrapper{background-color:var(--bg-panel);border:1px solid var(--border);border-radius:6px;flex:1;display:flex;flex-direction:column;overflow:hidden;position:relative; margin-bottom: 20px;}.status-header{background-color:rgba(39,174,96,.2);color:var(--success);padding:10px 20px;font-size:.8rem;font-weight:700;display:flex;flex-direction:column;gap:5px;border-bottom:1px solid var(--success)}.status-header.error,.tk-header{color:var(--jwt-pink)}.box-actions,.box-tabs span{font-size:.75rem;cursor:pointer}.status-header.error{background-color:rgba(251,1,91,.1);border-bottom:1px solid var(--jwt-pink)}#tokenEditor{flex:1;padding:20px;font-size:16px;word-break:break-all;overflow-y:auto;white-space:pre-wrap;background:0 0;border:none;resize:none}.tk-payload{color:var(--jwt-purple)}.box-tabs span,.tk-sig{color:var(--jwt-blue)}.box-actions,.box-tabs span.inactive{color:var(--text-muted)}.col-right{flex:1;display:flex;flex-direction:column;gap:20px}.json-editor-box{background-color:var(--bg-panel);border:1px solid var(--border);border-radius:6px;overflow:hidden}.box-header{display:flex;justify-content:space-between;background:rgba(255,255,255,.05);padding:8px 15px;border-bottom:1px solid var(--border)}.box-tabs span{font-weight:700;margin-right:15px}.editor-textarea{width:100%;background:0 0;border:none;color:var(--text-main);font-family:'Fira Code',monospace;font-size:14px;padding:15px;min-height:120px;resize:vertical}.label-header{border-left:4px solid var(--jwt-pink);padding-left:10px}.label-payload{border-left:4px solid var(--jwt-purple);padding-left:10px}.label-sig{border-left:4px solid var(--jwt-blue);padding-left:10px}.sig-box{padding:15px;font-size:.9rem;color:var(--jwt-blue)}.sig-input-container{background:rgba(0,185,241,.1);padding:12px;display:flex;align-items:center;border-radius:4px; gap:10px; margin-top: 10px;}.gen-btn,.sig-input{color:#fff;border:none}.sig-status{font-weight:700;margin-right:10px;font-size:.8rem}.sig-input{background:0 0;flex:1;font-family:'Fira Code',monospace;font-size:.9rem; color: var(--text-main)}.gen-btn{background:#333;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:.8rem; font-weight: bold; text-transform: uppercase; transition: 0.2s;}.gen-btn:hover{background:#444}.gen-btn.primary { background: var(--jwt-pink); }.gen-btn.primary:hover { background: #d0004b; }
        
        @media (max-width:900px){.alerts-container,.workspace{flex-direction:column}}

        /* --- 3. Custom UI Elements for Forms --- */
        .control-group { padding: 20px; border-bottom: 1px solid var(--border); }
        .control-group label { display: block; margin-bottom: 8px; font-size: 0.9rem; color: var(--text-muted); }
        .control-row { display: flex; gap: 15px; align-items: center; margin-bottom: 10px; flex-wrap: wrap; }
        input[type="number"], input[type="text"] { 
            background: rgba(0,0,0,0.2); border: 1px solid var(--border); 
            color: var(--text-main); padding: 8px; border-radius: 4px; 
        }
        input[type="checkbox"] { accent-color: var(--jwt-pink); width: 16px; height: 16px; }
        .output-display { 
            background: rgba(0,0,0,0.3); 
            padding: 15px; 
            font-family: 'Fira Code', monospace; 
            color: var(--jwt-blue); 
            word-break: break-all; 
        }
        .copy-btn { float: right; font-size: 0.7rem; color: var(--text-muted); cursor: pointer; }
        .copy-btn:hover { color: var(--text-main); }
    </style>
</head>
<body>

    <header>
        <div class="logo">
            <div class="logo-icon">C</div>
            <span>CryptoTools</span>
        </div>
        <div class="tools-menu">
            <!-- Dark Mode Toggle -->
            <div class="icon-btn" id="themeToggle" title="Toggle Dark/Light Mode">
                â—‘
            </div>
        </div>
    </header>

    <div class="hero-title">
        <h1>Security & Cryptography</h1>
    </div>

    <div class="debugger-container">
        
        <!-- Navigation Tabs -->
        <div class="tabs-header">
            <div class="main-tab active" onclick="switchTab('password')">Password Gen</div>
            <div class="main-tab" onclick="switchTab('hash')">Hash Gen</div>
            <div class="main-tab" onclick="switchTab('uuid')">UUID / GUID</div>
            <div class="main-tab" onclick="switchTab('bcrypt')">Bcrypt</div>
        </div>

        <!-- TAB 1: PASSWORD GENERATOR -->
        <div class="workspace active" id="tab-password">
            <div class="col-left">
                <div class="section-header">Configuration</div>
                <div class="encoded-wrapper">
                    <div class="control-group">
                        <div class="control-row">
                            <label>Length: <span id="lenVal">16</span></label>
                            <input type="range" min="8" max="128" value="16" oninput="document.getElementById('lenVal').innerText=this.value; generatePassword()">
                        </div>
                        <div class="control-row">
                            <label><input type="checkbox" id="useUpper" checked onchange="generatePassword()"> A-Z</label>
                            <label><input type="checkbox" id="useLower" checked onchange="generatePassword()"> a-z</label>
                            <label><input type="checkbox" id="useNum" checked onchange="generatePassword()"> 0-9</label>
                            <label><input type="checkbox" id="useSym" checked onchange="generatePassword()"> !@#$</label>
                        </div>
                        <button class="gen-btn primary" onclick="generatePassword()">Regenerate</button>
                    </div>
                </div>
            </div>
            <div class="col-right">
                <div class="section-header">Result</div>
                <div class="json-editor-box">
                    <div class="box-header">
                        <div class="box-tabs"><span>GENERATED PASSWORD</span></div>
                        <div class="box-actions copy-btn" onclick="copyToClipboard('pwdOutput')">Copy</div>
                    </div>
                    <textarea id="pwdOutput" class="editor-textarea" style="color: var(--jwt-pink); font-size: 1.2rem;"></textarea>
                </div>
            </div>
        </div>

        <!-- TAB 2: HASH GENERATOR -->
        <div class="workspace" id="tab-hash">
            <div class="col-left">
                <div class="section-header">Input Text</div>
                <div class="json-editor-box">
                    <textarea id="hashInput" class="editor-textarea" placeholder="Type text here to hash..." oninput="generateHashes()"></textarea>
                </div>
            </div>
            <div class="col-right">
                <div class="section-header">Hashes</div>
                
                <div class="json-editor-box" style="margin-bottom: 10px;">
                    <div class="box-header"><div class="box-tabs"><span>MD5</span></div></div>
                    <div class="sig-box" id="md5Output"></div>
                </div>

                <div class="json-editor-box" style="margin-bottom: 10px;">
                    <div class="box-header"><div class="box-tabs"><span>SHA-1</span></div></div>
                    <div class="sig-box" id="sha1Output"></div>
                </div>

                <div class="json-editor-box" style="margin-bottom: 10px;">
                    <div class="box-header"><div class="box-tabs"><span>SHA-256</span></div></div>
                    <div class="sig-box" id="sha256Output"></div>
                </div>

                <div class="json-editor-box">
                    <div class="box-header"><div class="box-tabs"><span>SHA-512</span></div></div>
                    <div class="sig-box" id="sha512Output"></div>
                </div>
            </div>
        </div>

        <!-- TAB 3: UUID GENERATOR -->
        <div class="workspace" id="tab-uuid">
            <div class="col-left">
                <div class="section-header">Controls</div>
                <div class="encoded-wrapper">
                    <div class="control-group">
                        <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:15px;">
                            UUIDs (Universally Unique Identifiers) are 128-bit labels used for information in computer systems.
                        </p>
                        <div class="control-row">
                            <button class="gen-btn primary" onclick="generateUUID(4)">Generate v4 (Random)</button>
                            <button class="gen-btn" onclick="generateUUID(1)">Generate v1 (Timestamp)</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-right">
                <div class="section-header">Generated UUID</div>
                <div class="json-editor-box">
                    <div class="box-header">
                        <div class="box-tabs"><span id="uuidLabel">UUID v4</span></div>
                        <div class="box-actions copy-btn" onclick="copyToClipboard('uuidOutput')">Copy</div>
                    </div>
                    <textarea id="uuidOutput" class="editor-textarea" style="color: var(--jwt-blue); font-size: 1.5rem; text-align:center; padding-top:40px;"></textarea>
                </div>
            </div>
        </div>

        <!-- TAB 4: BCRYPT GENERATOR -->
        <div class="workspace" id="tab-bcrypt">
            <div class="col-left">
                <div class="section-header">Password & Salt</div>
                <div class="encoded-wrapper">
                    <div class="control-group">
                        <label>Password</label>
                        <input type="text" id="bcryptPass" class="sig-input" style="background:rgba(0,0,0,0.2); width:100%; padding:10px; margin-bottom:15px;" placeholder="secret123">
                        
                        <label>Salt Rounds (Work Factor): <span id="saltVal">10</span></label>
                        <input type="range" min="4" max="12" value="10" oninput="document.getElementById('saltVal').innerText=this.value">
                        
                        <div style="margin-top:20px;">
                            <button class="gen-btn primary" onclick="generateBcrypt()">Hash Password</button>
                        </div>
                        <p style="font-size:0.8rem; color:var(--text-muted); margin-top:10px;">
                            Note: Higher salt rounds increase calculation time exponentially. 
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-right">
                <div class="section-header">Bcrypt Hash</div>
                <div class="json-editor-box">
                    <div class="box-header">
                        <div class="box-tabs"><span>HASH OUTPUT</span></div>
                        <div class="box-actions copy-btn" onclick="copyToClipboard('bcryptOutput')">Copy</div>
                    </div>
                    <textarea id="bcryptOutput" class="editor-textarea" style="color: var(--jwt-purple);"></textarea>
                </div>
                <div class="alert-info" style="padding:10px; border-radius:4px; font-size:0.85rem;">
                    Bcrypt is designed to be slow to resist brute-force attacks.
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- 1. Dark Mode Toggle ---
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        
        // Check local storage
        if(localStorage.getItem('theme') === 'light') {
            body.setAttribute('data-theme', 'light');
        }

        themeToggle.addEventListener('click', () => {
            if (body.getAttribute('data-theme') === 'light') {
                body.removeAttribute('data-theme');
                localStorage.setItem('theme', 'dark');
            } else {
                body.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            }
        });

        // --- 2. Tab Switching ---
        function switchTab(tabName) {
            // Update Tab Header
            document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Update Workspace
            document.querySelectorAll('.workspace').forEach(w => w.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.add('active');
        }

        // --- 3. Helper: Copy to Clipboard ---
        function copyToClipboard(elementId) {
            const el = document.getElementById(elementId);
            if(el.tagName === 'TEXTAREA' || el.tagName === 'INPUT') {
                el.select();
                document.execCommand('copy');
            } else {
                const text = el.innerText;
                navigator.clipboard.writeText(text);
            }
            alert('Copied to clipboard!');
        }

        // --- 4. Tool: Password Generator ---
        function generatePassword() {
            const len = parseInt(document.querySelector('input[type=range]').value);
            const upper = document.getElementById('useUpper').checked;
            const lower = document.getElementById('useLower').checked;
            const num = document.getElementById('useNum').checked;
            const sym = document.getElementById('useSym').checked;

            const charSets = {
                upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                lower: 'abcdefghijklmnopqrstuvwxyz',
                num: '0123456789',
                sym: '!@#$%^&*()_+-=[]{}|;:,.<>?'
            };

            let allowed = '';
            if(upper) allowed += charSets.upper;
            if(lower) allowed += charSets.lower;
            if(num) allowed += charSets.num;
            if(sym) allowed += charSets.sym;

            if(allowed === '') {
                document.getElementById('pwdOutput').value = 'Select at least one option';
                return;
            }

            let password = '';
            for (let i = 0; i < len; i++) {
                const randomIndex = Math.floor(Math.random() * allowed.length);
                password += allowed[randomIndex];
            }
            document.getElementById('pwdOutput').value = password;
        }
        // Init
        generatePassword();

        // --- 5. Tool: Hash Generator ---
        function generateHashes() {
            const input = document.getElementById('hashInput').value;
            
            document.getElementById('md5Output').innerText = CryptoJS.MD5(input).toString();
            document.getElementById('sha1Output').innerText = CryptoJS.SHA1(input).toString();
            document.getElementById('sha256Output').innerText = CryptoJS.SHA256(input).toString();
            document.getElementById('sha512Output').innerText = CryptoJS.SHA512(input).toString();
        }

        // --- 6. Tool: UUID Generator ---
        function generateUUID(version) {
            let id;
            if(version === 1) {
                id = uuid.v1();
                document.getElementById('uuidLabel').innerText = "UUID v1 (Timestamp)";
            } else {
                id = uuid.v4();
                document.getElementById('uuidLabel').innerText = "UUID v4 (Random)";
            }
            document.getElementById('uuidOutput').value = id;
        }
        generateUUID(4);

        // --- 7. Tool: Bcrypt Generator ---
        function generateBcrypt() {
            const pass = document.getElementById('bcryptPass').value;
            const rounds = parseInt(document.querySelector('#tab-bcrypt input[type=range]').value);
            
            if(!pass) {
                document.getElementById('bcryptOutput').value = "Please enter a password first.";
                return;
            }

            document.getElementById('bcryptOutput').value = "Hashing... (this may take a moment)";

            // Use timeout to allow UI to update before sync blocking calculation
            setTimeout(() => {
                try {
                    const salt = dcodeIO.bcrypt.genSaltSync(rounds);
                    const hash = dcodeIO.bcrypt.hashSync(pass, salt);
                    document.getElementById('bcryptOutput').value = hash;
                } catch(e) {
                    document.getElementById('bcryptOutput').value = "Error: " + e.message;
                }
            }, 50);
        }

    </script>
</body>
</html>
